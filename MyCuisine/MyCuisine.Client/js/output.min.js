(function(){"use strict";function n(n,t){var i="views/",r="vm";t.html5Mode(!0);n.when("/",{title:"Home",style:"home",templateUrl:i+"home.html",controllerAs:r}).when("/location",{title:"Location",templateUrl:i+"location.html",controllerAs:r}).when("/all-menu",{title:"All Menu",templateUrl:i+"menu/all-menu.html",controllerAs:r}).when("/breakfast-menu",{title:"Breakfast Menu",templateUrl:i+"menu/breakfast-menu.html",controllerAs:r}).when("/lunch-menu",{title:"Lunch Menu",templateUrl:i+"menu/lunch-menu.html",controllerAs:r}).when("/dinner-menu",{title:"Dinner Menu",templateUrl:i+"menu/dinner-menu.html",controllerAs:r}).when("/blog",{title:"Blog",templateUrl:i+"blog.html",controller:"BlogController",controllerAs:r}).when("/login",{title:"Login",templateUrl:i+"login.html",controllerAs:r}).when("/post/add",{title:"Add Post",templateUrl:i+"addPost.html",controller:"AddPostController",controllerAs:r}).when("/post/:objectId",{title:"Post",templateUrl:i+"post.html",controllerAs:r}).otherwise({redirectTo:"/"})}angular.module("myApp.services",[]);angular.module("myApp.directives",[]);angular.module("myApp.controllers",["myApp.services"]);var t=angular.module("myApp",["ngRoute","ngResource","myApp.controllers","myApp.directives"]).config(["$routeProvider","$locationProvider",n]).value("toastr",toastr);t.run(["$rootScope",function(n){n.$on("$routeChangeSuccess",function(t,i){n.title=i.$$route.title;n.style=i.$$route.style||"page"})}])})();$(function(){$(".nav li").click(function(){$("#navbar li").removeClass("active");$(this).addClass("active")})});Parse.initialize("BtESBJZiztQr2rsfiyrhJT0BhA26EL8CmnNWamvS","mwzjvu8gOMfnZgw6hUaWT0daQ83c6kEDsMp0kttV"),function(){"use strict";angular.module("myApp.services").factory("notifier",["toastr",function(n){return{success:function(t){n.success(t)},error:function(t){n.error(t)}}}])}(),function(){"use strict";function n(n,t,i){var r=this,u=Parse.User.current(),f="Post is public now!",e="Error: Need high level access!";r.public=function(r){var s=Parse.Object.extend("Post"),o=new s;o.set("title",r.title);o.set("author",u.get("fname")||u.get("username"));o.set("img",r.image);o.set("category",r.category);o.set("desc",r.description);o.save(null,{success:function(){i.success(f);n.path("/blog");t.reload()},error:function(){i.error(e)}})};r.reset=function(){r.post=""}}angular.module("myApp.controllers").controller("AddPostController",["$location","$route","notifier",n])}(),function(){"use strict";function n(n,t){var i=this,r;i.orderPost="-createdAt";i.orderComment="-Comments";i.loading=!0;i.postLimit=3;i.sidebarPostLimit=5;i.sidebarCommentLimit=5;const u="BtESBJZiztQr2rsfiyrhJT0BhA26EL8CmnNWamvS",f="8DbU4OmT5kuqPP6S8UlOdVur2m5KcgXcJ8sMK2Zz";r=n("https://api.parse.com/1/classes/Post",{},{getPost:{method:"GET",headers:{"X-Parse-Application-Id":u,"X-Parse-REST-API-Key":f},params:{limit:10,order:i.orderPost}},getCom:{method:"GET",headers:{"X-Parse-Application-Id":u,"X-Parse-REST-API-Key":f},params:{order:i.orderComment,limit:i.sidebarCommentLimit}}});r.getPost().$promise.then(function(n){var r=t.objectId;i.posts=n.results;i.range=function(){for(var t=[],n=0;n<i.posts.length;n=n+i.postLimit)t.push(n);return t};i.currentPage=function(n){i.page=n};i.currentPost=$.grep(n.results,function(n){return n.objectId==r})[0]}).catch(function(){}).finally(function(){i.loading=!1});r.getCom().$promise.then(function(n){i.comments=n.results}).catch(function(){}).finally(function(){i.loading=!1})}angular.module("myApp.controllers").controller("BlogController",["$resource","$routeParams","$rootScope","notifier",n])}(),function(){"use strict";function n(n,t,i,r){var u=this,f="Comment is add!",e="Reply is add!";u.sendComment=function(n,u){var e=Parse.User.current(),s,o;e?(console.log(e),s=Parse.Object.extend("Post"),o=new Parse.Query(s),o.equalTo("objectId",u),o.first({success:function(t){n.date=t.updatedAt;n.reply=[];n.sender=e.get("fname")?e.get("fname"):e.get("username");n.img=e.get("img")?e.get("img"):"../css/img/comments/avatar.jpg";t.add("Comments",n);t.save();r.success(f);i.reload()},error:function(n){r.error("Error: "+n.code+" "+n.message)}})):(r.error(errorCommentMsg),t.path("/login"))};u.replyComment=function(n,u,f){var o,h,s;console.log(n,u,f);o=Parse.User.current();o?(n.sender=o.get("fname")||o.get("username"),n.img=o.get("img")?o.get("img"):"../css/img/comments/avatar.jpg",h=Parse.Object.extend("Post"),s=new Parse.Query(h),s.equalTo("objectId",u),s.first({success:function(t){var u=t.get("Comments");n.date=t.updatedAt;u[f].reply.push(n);t.save();r.success(e);i.reload()},error:function(n){r.error("Error: "+n.code+" "+n.message)}})):(r.error(errorCommentMsg),t.path("/login"),i.reload())}}angular.module("myApp.controllers").controller("CommentController",["$resource","$location","$route","notifier",n])}(),function(){"use strict";function n(n,t,i,r){var u=this,f="Successful login!",e="Registration successful!",o="Successful logout!",s="Password reset request was sent successfully!",h="Username/Password combination is not valid!";u.currentUser=Parse.User.current();u.login=function(t){Parse.User.logIn(t.username,t.password,{success:function(t){u.currentUser=t;r.success(f);n.location.assign("/blog")},error:function(){r.error(h)}})};u.signup=function(t){var i=new Parse.User;i.set("username",t.username);i.set("password",t.password);i.set("email",t.email);i.set("fname",t.fname);i.set("lname",t.lname);i.signUp(null,{success:function(t){r.success(e);u.currentUser=t;n.location.assign("/blog")},error:function(n,t){r.error("Error: "+t.code+" "+t.message)}})};u.logOut=function(){Parse.User.logOut();r.success(o);u.currentUser=null;t.path("/");i.reload()};u.forgot=function(n){Parse.User.requestPasswordReset(n,{success:function(){r.success(s)},error:function(n){r.error("Error: "+n.code+" "+n.message)}})}}angular.module("myApp.controllers").controller("LoginController",["$window","$location","$route","notifier",n])}(),function(){"use strict";function n(){return{restrict:"A",templateUrl:"views/directives/post-directive.html"}}angular.module("myApp.directives").directive("post",[n])}(),function(){"use strict";function n(){return{restrict:"A",templateUrl:"views/directives/sidebar-directive.html"}}angular.module("myApp.directives").directive("sidebar",[n])}();